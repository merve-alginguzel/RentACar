
@model IEnumerable<DataModel.CarDM>
@{
    ViewBag.Title = "Tarihe Göre Sorgulama";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<!-- Page Sidebar -->
<!-- /page sidebar -->
<!-- Main container -->
<div class="main-container">

    <!-- Main header -->
    <div class="main-header row gray-bg">
        <div class="col-sm-6 col-xs-7">

            <!-- User info -->
            <ul class="user-info pull-left">
                <li class="profile-info dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#" aria-expanded="false"> <img width="44" class="img-circle avatar" alt="" src="images/man-3.jpg">Hoşgeldiniz - @Session["UserName"] <span class="caret"></span></a>

                    <!-- User action menu -->
                    <ul class="dropdown-menu">
                        <li><a href="@Url.Action("Logout","Home")"><i class="icon-logout"></i>Çıkış Yap</a></li>
                    </ul>
                    <!-- /user action menu -->

                </li>
            </ul>
            <!-- /user info -->

        </div>

    </div>
    <!-- /main header -->
    <!-- /secondary header -->
    <!-- Main content -->
    <div class="main-content">

        <div class="row">

            <form>
                <div class="form-group">
                    <label class="col-sm-12 control-label">Rezervasyon Başlangıç Tarihi :</label>
                    <div class="col-sm-12">
                        <input class="form-control" type="date" id="StartDate" name="StartDate" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-12 control-label">Rezervasyon Bitiş Tarihi :</label>
                    <div class="col-sm-12">
                        <input class="form-control" type="date" id="EndDate" name="EndDate" />
                    </div>
                </div>
                <div class="form-group">
                    <center><button class="btn btn-primary" type="button" onclick="Send()" style="margin-top:10px;">ARA</button></center>
                </div>

            </form>

        </div>

        <div class="row">
            <div class="col-lg-12 animatedParent animateOnce z-index-50">
                <div class="panel panel-default animated fadeInUp">
                    <div class="panel-heading clearfix">
                        <h3 class="panel-title">Araç Listesi</h3>
                        <ul class="panel-tool-options">
                            <li><a data-rel="collapse" href="#"><i class="icon-down-open"></i></a></li>
                            <li><a data-rel="close" href="#"><i class="icon-cancel"></i></a></li>
                        </ul>
                    </div>
                    <div class="panel-body">
                        <div class="table-responsive">
                            <table id="valTable" class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Plaka No</th>
                                        <th>Şasi No</th>
                                        <th>Renk</th>
                                        <th>Tutar</th>
                                    </tr>
                                </thead>
                                <tbody id="tbody">

                                    @foreach (var item in Model)
                                    {
                                        <tr>
                                            <th scope="row">@item.ID</th>
                                            <td>@item.licensePlate</td>
                                            <td>@item.chassisNumber</td>
                                            <td>@item.color</td>
                                            <td>@item.amount</td>
                                        </tr>
                                    }



                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="animatedParent animateOnce z-index-10">
            <div class="footer-main animated fadeInUp slow">&copy; 2019 <strong>Rent A Car</strong> </div>
        </footer>
        <!-- /footer -->

    </div>
    <!-- /main content -->

</div>
<!-- /main container -->
<!-- /page container -->
<!--Load JQuery-->

@section scripts{
<script>
    function Send() {
        

    $.ajax({
    type: "post",
    url: '@Url.Action("GetDateCar", "Home")',
        data: { StartDate: $("#StartDate").val(), EndDate: $("#EndDate").val()  },
        success: function (data) {
            console.log(data);
            $("#tbody").html("");

            $.each(data, function (data, value) {
                $("#tbody").append("<tr><th scope=\"row\">" + value.ID + "</th><td>" + value.licensePlate + "</td><td>" + value.chassisNumber + "</td><td>" + value.color + "</td><td>" + value.amount + "</td></tr>");
            });
            
    }
    });



    }
</script>

}